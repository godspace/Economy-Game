<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ù–æ–≤–æ–≥–æ–¥–Ω—è—è —Å–¥–µ–ª–∫–∞</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <link rel="stylesheet" href="style.css">
    
    <style>
        .text-champagne { color: var(--champagne-mist); }
        .text-yellow-green { color: var(--yellow-green); }
        .text-brick { color: var(--blushed-brick); }
        .text-sage { color: var(--sage-green); }
        
        .bg-hunter { background-color: var(--hunter-green); }
        .bg-sage { background-color: var(--sage-green); }
        
        .border-sage { border-color: var(--sage-green); }
        .border-brick { border-color: var(--blushed-brick); }
    </style>
</head>
<body class="min-h-screen flex flex-col items-center justify-start p-4 pt-8 bg-[#386641]">

    <div id="snow-container"></div>

    <div id="login-screen" class="glass-panel p-6 max-w-sm w-full z-10 flex flex-col gap-6">
        <div class="text-center">
            <h1 class="text-4xl font-bold text-brick mb-2">üéÖ –í—Ö–æ–¥</h1>
            <p class="text-sm text-champagne opacity-80">–í–≤–µ–¥–∏—Ç–µ —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–æ–¥ —ç–ª—å—Ñ–∞</p>
        </div>
        <div>
            <input type="text" id="access-code" maxlength="6" placeholder="–ö–æ–¥..." 
                   class="w-full p-4 rounded-xl bg-[#2a4d31] border border-[#6a994e] text-center text-2xl text-champagne mb-4 focus:outline-none focus:border-[#a7c957] tracking-[0.2em] placeholder-opacity-30 placeholder-[#f2e8cf]">
            <button id="login-btn" class="btn-primary w-full py-4 rounded-xl shadow-lg text-lg uppercase tracking-wider">–í–æ–π—Ç–∏ –≤ –∏–≥—Ä—É</button>
            <p id="login-error" class="text-brick mt-2 text-sm text-center hidden font-bold"></p>
        </div>
        <div class="border-t border-[#6a994e] pt-4">
            <h3 class="text-center text-yellow-green font-bold mb-3 text-sm uppercase tracking-widest">üèÜ –õ–∏–¥–µ—Ä—ã —à–∫–æ–ª—ã</h3>
            <table class="ranking-table" id="login-leaderboard">
                </table>
        </div>
    </div>

    <div id="game-screen" class="hidden w-full max-w-2xl z-10">
        
        <div class="glass-panel p-5 mb-5 flex justify-between items-start shadow-xl">
            <div>
                <div class="text-xs text-sage font-bold uppercase tracking-wider">–í—ã: –¢–∞–π–Ω—ã–π –°–∞–Ω—Ç–∞</div>
                <div class="text-3xl font-bold text-yellow-green drop-shadow-sm mt-1">üí∞ <span id="my-coins">0</span></div>
            </div>
            <div class="flex flex-col items-end gap-2">
                <div class="text-right">
                    <div class="text-xs text-sage font-bold uppercase tracking-wider">–í–∞—à –∫–ª–∞—Å—Å</div>
                    <div class="font-bold text-xl text-champagne" id="my-class">--</div>
                </div>
                <button onclick="logout()" class="text-[10px] uppercase font-bold text-brick border border-brick hover:bg-brick hover:text-white px-3 py-1 rounded-full transition">–í—ã–π—Ç–∏ üö™</button>
            </div>
        </div>

        <div class="flex justify-center mb-6 space-x-2 bg-[#2a4d31] p-2 rounded-xl shadow-inner overflow-x-auto">
            <button onclick="switchTab('game')" id="tab-btn-game" class="tab-btn active text-sm flex-1 min-w-[70px] py-2">üéÑ –ò–ì–†–ê</button>
            <button onclick="switchTab('shop')" id="tab-btn-shop" class="tab-btn text-sm flex-1 min-w-[70px] py-2">üç´ –ú–ê–ì–ê–ó–ò–ù</button>
            <button onclick="switchTab('rating')" id="tab-btn-rating" class="tab-btn text-sm flex-1 min-w-[70px] py-2">üèÜ –¢–û–ü</button>
            <button onclick="switchTab('admin')" id="tab-btn-admin" class="tab-btn text-sm flex-1 hidden text-brick font-bold border-brick min-w-[70px] py-2">ADMIN</button>
        </div>

        <div id="tab-content-game">
            <div id="incoming-deals" class="mb-6 space-y-4"></div>
            
            <div class="flex items-center justify-between mb-4 px-2">
                <h2 class="text-base font-bold text-champagne uppercase tracking-widest opacity-70">–ê–Ω–æ–Ω–∏–º–Ω—ã–µ —ç–ª—å—Ñ—ã</h2>
                <span class="text-xs text-yellow-green bg-[#2a4d31] px-3 py-1 rounded-full border border-[#6a994e]">–õ–∏–º–∏—Ç: 5</span>
            </div>
            
            <div id="players-list" class="grid grid-cols-1 gap-4">
                </div>
        </div>

        <div id="tab-content-shop" class="hidden">
            <div class="glass-panel p-8 text-center">
                <h2 class="text-2xl font-bold text-champagne mb-8">–õ–µ—Å–Ω–∞—è –õ–∞–≤–∫–∞</h2>
                
                <div class="bg-[#2a4d31] p-6 rounded-2xl border-2 border-[#6a994e] shadow-xl max-w-sm mx-auto relative group">
                    <div class="text-7xl mb-6 transform group-hover:scale-110 transition duration-300">üç´</div>
                    <h3 class="text-2xl font-bold text-champagne mb-2">Baunty</h3>
                    <p class="text-sage text-sm mb-6 font-bold">–†–∞–π—Å–∫–æ–µ –Ω–∞—Å–ª–∞–∂–¥–µ–Ω–∏–µ</p>
                    <div class="text-4xl font-bold text-yellow-green mb-6">99 üí∞</div>
                    
                    <button id="btn-buy-bounty" onclick="buyItem('Baunty', 99)" 
                            class="btn-primary w-full py-4 rounded-xl text-xl shadow-lg active:scale-95">
                        –ö–£–ü–ò–¢–¨
                    </button>
                    
                    <p id="shop-status" class="text-sm text-yellow-green mt-4 font-bold bg-[#386641] p-3 rounded-lg hidden border border-[#a7c957]">
                        üì¶ –ó–∞–∫–∞–∑ –æ—Ñ–æ—Ä–º–ª–µ–Ω! –ñ–¥–∏—Ç–µ –≤—ã–¥–∞—á–∏.
                    </p>
                </div>
                
                <div class="mt-8 text-xs text-sage opacity-70">
                    * –í—ã –Ω–µ –º–æ–∂–µ—Ç–µ —Å–¥–µ–ª–∞—Ç—å –Ω–æ–≤—ã–π –∑–∞–∫–∞–∑, –ø–æ–∫–∞ –Ω–µ –ø–æ–ª—É—á–∏–ª–∏ –ø—Ä–µ–¥—ã–¥—É—â–∏–π.
                </div>
            </div>
        </div>

        <div id="tab-content-rating" class="hidden glass-panel p-6">
            <h2 class="text-center text-yellow-green font-bold mb-6 text-lg uppercase tracking-widest">–†–µ–π—Ç–∏–Ω–≥ —à–∫–æ–ª—ã</h2>
            <div class="overflow-x-auto">
                <table class="ranking-table w-full text-left" id="main-leaderboard">
                    <thead>
                        <tr class="text-xs text-sage uppercase">
                            <th class="p-3">#</th>
                            <th class="p-3">–ò–º—è</th>
                            <th class="p-3">–ö–ª–∞—Å—Å</th>
                            <th class="p-3 text-right">Coins</th>
                        </tr>
                    </thead>
                    <tbody class="text-base">
                        </tbody>
                </table>
            </div>
        </div>

        <div id="tab-content-admin" class="hidden glass-panel p-4 border-brick">
            <div class="flex justify-between items-center mb-4 border-b border-[#6a994e] pb-2">
                <h2 class="text-brick font-bold uppercase text-sm">üì¶ –ó–∞–∫–∞–∑—ã</h2>
                <button onclick="loadAdminOrders()" class="text-xs bg-[#2a4d31] hover:bg-[#386641] px-4 py-2 rounded-lg text-champagne">–û–±–Ω–æ–≤–∏—Ç—å</button>
            </div>
            <div id="admin-orders-list" class="space-y-3">
                </div>
        </div>
    </div>

    <div id="modal-move" class="fixed inset-0 bg-[#0f1c11]/95 hidden items-center justify-center z-50 p-4">
        <div class="glass-panel p-6 w-full max-w-sm text-center bg-[#2a4d31] border-[#a7c957] flex flex-col max-h-[90vh]">
            <h3 id="modal-title" class="text-2xl mb-3 text-champagne font-bold flex-shrink-0">–í–∞—à –≤—ã–±–æ—Ä?</h3>
            
            <div class="flex-grow overflow-y-auto mb-6 bg-[#1f3a24] rounded-xl p-3 border border-[#386641] shadow-inner">
                <div class="text-xs text-sage uppercase tracking-widest mb-3 sticky top-0 bg-[#1f3a24] py-1 font-bold z-10">–ò—Å—Ç–æ—Ä–∏—è —Å –∏–≥—Ä–æ–∫–æ–º</div>
                <div id="modal-history-list" class="space-y-2 text-sm">
                    </div>
            </div>

            <p class="text-sm text-champagne/70 mb-6 px-2 flex-shrink-0 leading-relaxed">
                <span class="text-yellow-green font-bold">–°–æ—Ç—Ä—É–¥–Ω–∏—á–µ—Å—Ç–≤–æ:</span> +2 / +2<br>
                <span class="text-brick font-bold">–û–±–º–∞–Ω:</span> –≤—ã +3, –æ–Ω -1
            </p>
            
            <div class="grid grid-cols-2 gap-4 flex-shrink-0">
                <button onclick="makeMove('cooperate')" class="py-4 rounded-xl bg-[#6a994e] hover:bg-[#588540] text-[#1f3a24] font-bold text-lg shadow-lg active:scale-95 border-b-4 border-[#4a7036]">
                    ü§ù –î—Ä—É–∂–±–∞
                </button>
                <button onclick="makeMove('defect')" class="py-4 rounded-xl bg-[#bc4749] hover:bg-[#a33a3c] text-champagne font-bold text-lg shadow-lg active:scale-95 border-b-4 border-[#8f3234]">
                    üòà –û–±–º–∞–Ω
                </button>
            </div>
            <button onclick="closeModal()" class="mt-6 text-sage text-sm hover:text-champagne underline flex-shrink-0 transition">–û—Ç–º–µ–Ω–∞</button>
        </div>
    </div>

    <!--<script src="game.js"></script> -->
    
</body>
</html>
